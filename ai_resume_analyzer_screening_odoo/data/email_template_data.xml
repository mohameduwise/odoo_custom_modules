<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- Email Template for High-Score Notifications -->
        <record id="email_template_high_score" model="mail.template">
            <field name="name">High-Scoring Candidate Notification</field>
            <field name="model_id" ref="hr_recruitment.model_hr_applicant"/>
            <field name="subject">High-Scoring Candidate: ${object.name} - Score: ${object.ai_score:.1f}</field>
            <field name="email_from">${user.email|safe}</field>
            <field name="email_to">${object.ai_screening_id.notification_recipient_ids.mapped('email')|safe}</field>
            <field name="body_html" type="html">
                <div style="font-family: Arial, sans-serif;">
                    <h2 style="color: #0066cc;">High-Scoring Candidate Identified</h2>
                    <p>A new high-scoring candidate has been identified through AI resume screening:</p>
                    <table style="width: 100%; border-collapse: collapse; margin: 20px 0;">
                        <tr>
                            <td style="padding: 8px; background-color: #f0f0f0; font-weight: bold; width: 200px;">Name:</td>
                            <td style="padding: 8px;">${object.name}</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px; background-color: #f0f0f0; font-weight: bold;">Email:</td>
                            <td style="padding: 8px;">${object.email_from or 'N/A'}</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px; background-color: #f0f0f0; font-weight: bold;">Phone:</td>
                            <td style="padding: 8px;">${object.partner_phone or 'N/A'}</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px; background-color: #f0f0f0; font-weight: bold;">Position:</td>
                            <td style="padding: 8px;">${object.job_id.name if object.job_id else 'N/A'}</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px; background-color: #f0f0f0; font-weight: bold;">AI Score:</td>
                            <td style="padding: 8px; font-size: 18px; font-weight: bold; color: #0066cc;">${object.ai_score:.1f}/100</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px; background-color: #f0f0f0; font-weight: bold;">Screening Date:</td>
                            <td style="padding: 8px;">${object.screening_date or 'N/A'}</td>
                        </tr>
                    </table>
                    <p style="margin-top: 20px;">
                        <a href="${ctx.get('base_url', '')}/web#id=${object.id}&amp;model=hr.applicant&amp;view_type=form" 
                           style="background-color: #0066cc; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px; display: inline-block;">
                            View Candidate Profile
                        </a>
                    </p>
                    <p style="margin-top: 20px; color: #666; font-size: 12px;">
                        This is an automated notification from the AI Resume Screening system.
                    </p>
                </div>
            </field>
        </record>
    </data>
</odoo>

