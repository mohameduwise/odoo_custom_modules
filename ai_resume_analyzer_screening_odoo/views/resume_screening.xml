<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Form View for AI Resume Screening -->
    <record id="view_ai_resume_screening_form" model="ir.ui.view">
        <field name="name">ai.resume.screening.form</field>
        <field name="model">ai.resume.screening</field>
        <field name="arch" type="xml">
            <form>
                <header>
                    <button name="train_model" string="Train AI Model" type="object" class="btn-primary" invisible="model_trained == True"/>
                    <button name="screen_resumes" string="Screen Resumes" type="object" class="btn-success" invisible="model_trained == False"/>
                </header>
                <sheet>
                    <div class="oe_title">
                        <h1><field name="name" placeholder="Screening Name"/></h1>
                    </div>
                    <group>
                        <group string="Job Details">
                            <field name="job_position_id" options="{'no_quick_create': True}"/>
                            <field name="min_years_experience"/>
                        </group>
                        <group string="Status">
                            <field name="model_trained" readonly="1"/>
                            <field name="last_auto_screen_date" readonly="1"/>
                            <field name="last_auto_train_date" readonly="1"/>
                        </group>
                    </group>
                    <notebook>
                        <page string="Scoring Configuration">
                            <div style="margin-bottom: 25px; padding: 20px; background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%); border-left: 4px solid #2196f3; border-radius: 6px;">
                                <div style="display: flex; align-items: center; margin-bottom: 10px;">
                                    <i class="fa fa-info-circle" style="font-size: 20px; color: #1976d2; margin-right: 10px;" title="Information"/>
                                    <strong style="color: #1565c0; font-size: 14px;">How Scoring Works</strong>
                                </div>
                                <p style="margin: 0; color: #424242; font-size: 13px; line-height: 1.6;">
                                    Configure the percentage weight for each scoring component. The total should ideally be 100%, 
                                    but the system will automatically normalize if it's different. Adjust weights based on what matters most for this position.
                                </p>
                            </div>
                            
                            <div>
                                <div class="o_horizontal_separator mt-4 mb-3 text-uppercase fw-bolder small" style="margin-bottom: 15px;">Component Weights</div>
                                <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; width: 100%;">
                                    <!-- Keyword Score -->
                                    <div style="padding: 20px; background-color: #ffffff; border: 1px solid #e0e0e0; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); width: 100%; box-sizing: border-box;">
                                        <div style="display: flex; align-items: center; margin-bottom: 12px;">
                                            <div style="width: 40px; height: 40px; background: linear-gradient(135deg, #5CA280 0%, #4a8a6a 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 12px; flex-shrink: 0;">
                                                <i class="fa fa-key" style="color: white; font-size: 16px;" title="Keyword Score"/>
                                            </div>
                                            <div style="flex: 1; min-width: 0;">
                                                <div style="font-weight: 600; color: #2c3e50; font-size: 14px; margin-bottom: 2px;">Keyword Score</div>
                                                <div style="font-size: 11px; color: #6c757d;">Match keywords in resume</div>
                                            </div>
                                        </div>
                                        <field name="keyword_score_weight" widget="float" options="{'precision': 1}" nolabel="1"/>
                                    </div>
                                    
                                    <!-- Experience Score -->
                                    <div style="padding: 20px; background-color: #ffffff; border: 1px solid #e0e0e0; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); width: 100%; box-sizing: border-box;">
                                        <div style="display: flex; align-items: center; margin-bottom: 12px;">
                                            <div style="width: 40px; height: 40px; background: linear-gradient(135deg, #2196f3 0%, #1976d2 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 12px; flex-shrink: 0;">
                                                <i class="fa fa-briefcase" style="color: white; font-size: 16px;" title="Experience Score"/>
                                            </div>
                                            <div style="flex: 1; min-width: 0;">
                                                <div style="font-weight: 600; color: #2c3e50; font-size: 14px; margin-bottom: 2px;">Experience Score</div>
                                                <div style="font-size: 11px; color: #6c757d;">Years of experience</div>
                                            </div>
                                        </div>
                                        <field name="experience_score_weight" widget="float" options="{'precision': 1}" nolabel="1"/>
                                    </div>
                                    
                                    <!-- Structure Score -->
                                    <div style="padding: 20px; background-color: #ffffff; border: 1px solid #e0e0e0; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); width: 100%; box-sizing: border-box;">
                                        <div style="display: flex; align-items: center; margin-bottom: 12px;">
                                            <div style="width: 40px; height: 40px; background: linear-gradient(135deg, #ff9800 0%, #f57c00 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 12px; flex-shrink: 0;">
                                                <i class="fa fa-file-text" style="color: white; font-size: 16px;" title="Structure Score"/>
                                            </div>
                                            <div style="flex: 1; min-width: 0;">
                                                <div style="font-weight: 600; color: #2c3e50; font-size: 14px; margin-bottom: 2px;">Structure Score</div>
                                                <div style="font-size: 11px; color: #6c757d;">Resume structure quality</div>
                                            </div>
                                        </div>
                                        <field name="structure_score_weight" widget="float" options="{'precision': 1}" nolabel="1"/>
                                    </div>
                                    
                                    <!-- AI Prediction Score -->
                                    <div style="padding: 20px; background-color: #ffffff; border: 1px solid #e0e0e0; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); width: 100%; box-sizing: border-box;">
                                        <div style="display: flex; align-items: center; margin-bottom: 12px;">
                                            <div style="width: 40px; height: 40px; background: linear-gradient(135deg, #9c27b0 0%, #7b1fa2 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 12px; flex-shrink: 0;">
                                                <i class="fa fa-magic" style="color: white; font-size: 16px;" title="AI Prediction"/>
                                            </div>
                                            <div style="flex: 1; min-width: 0;">
                                                <div style="font-weight: 600; color: #2c3e50; font-size: 14px; margin-bottom: 2px;">AI Prediction</div>
                                                <div style="font-size: 11px; color: #6c757d;">Machine learning analysis</div>
                                            </div>
                                        </div>
                                        <field name="ai_prediction_weight" widget="float" options="{'precision': 1}" nolabel="1"/>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Total Weight Summary -->
                            <div style="margin-top: 20px;">
                                <div class="o_horizontal_separator mt-4 mb-3 text-uppercase fw-bolder small" style="margin-bottom: 15px;">Total Weight Summary</div>
                                <div style="padding: 25px; background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); border: 2px solid #dee2e6; border-radius: 8px; margin-top: 10px;">
                                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                                        <div>
                                            <div style="font-size: 12px; color: #6c757d; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 5px;">Total Weight</div>
                                            <div style="font-size: 32px; font-weight: 700; color: #2c3e50;">
                                                <field name="total_weight" widget="float" readonly="1" options="{'precision': 1}" nolabel="1"/>%
                                            </div>
                                        </div>
                                        <div style="text-align: right;">
                                            <div style="width: 80px; height: 80px; border-radius: 50%; background-color: #e9ecef; display: flex; align-items: center; justify-content: center; position: relative; border: 4px solid #28a745;" invisible="total_weight != 100">
                                                <div style="width: 60px; height: 60px; background-color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                                    <i class="fa fa-check-circle" style="color: #28a745; font-size: 24px;" title="Perfect Weight"/>
                                                </div>
                                            </div>
                                            <div style="width: 80px; height: 80px; border-radius: 50%; background-color: #fff3cd; display: flex; align-items: center; justify-content: center; position: relative; border: 4px solid #ffc107;" invisible="total_weight == 100">
                                                <div style="width: 60px; height: 60px; background-color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                                    <i class="fa fa-exclamation-triangle" style="color: #ffc107; font-size: 24px;" title="Weight Warning"/>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div style="padding: 15px; background-color: #d4edda; border-left: 4px solid #28a745; border-radius: 4px;" invisible="total_weight != 100">
                                        <div style="display: flex; align-items: center;">
                                            <i class="fa fa-check-circle" style="color: #155724; font-size: 16px; margin-right: 10px;" title="Success"/>
                                            <span style="color: #155724; font-size: 13px; font-weight: 500;">Perfect! Total weight is exactly 100%.</span>
                                        </div>
                                    </div>
                                    <div style="padding: 15px; background-color: #fff3cd; border-left: 4px solid #ffc107; border-radius: 4px;" invisible="total_weight == 100">
                                        <div style="display: flex; align-items: center; margin-bottom: 5px;">
                                            <i class="fa fa-exclamation-triangle" style="color: #856404; font-size: 16px; margin-right: 10px;" title="Warning"/>
                                            <span style="color: #856404; font-size: 13px; font-weight: 500;">Total weight is <strong><field name="total_weight" readonly="1" widget="float" options="{'precision': 1}" nolabel="1"/>%</strong></span>
                                        </div>
                                        <div style="color: #856404; font-size: 12px; margin-left: 26px;">
                                            The system will automatically normalize scores to 100% when calculating applicant scores.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </page>
                        <page string="Automation Settings">
                            <group>
                                <group string="Auto-Screening">
                                    <field name="auto_screen_enabled"/>
                                    <field name="last_auto_screen_date" readonly="1"/>
                                </group>
                                <group string="Auto-Training">
                                    <field name="auto_train_enabled"/>
                                    <field name="auto_train_threshold"/>
                                    <field name="last_auto_train_date" readonly="1"/>
                                </group>
                            </group>
                            <group string="Email Notifications">
                                <field name="email_notification_enabled"/>
                                <field name="summary_notification_frequency" widget="radio" options="{'horizontal': true}"/>
                                <field name="max_candidates_in_email" invisible="summary_notification_frequency == 'none'"/>
                                <field name="high_score_threshold"/>
                                <field name="notification_recipient_ids" widget="many2many_tags" options="{'no_create_edit': True}"/>
                                <field name="last_summary_notification_date" readonly="1" invisible="summary_notification_frequency == 'none'"/>
                            </group>
                        </page>
                        <page string="Keywords">
                            <field name="keyword_ids" widget="many2many_tags" placeholder="Add Keywords"/>
                            <!-- <tree editable="bottom" create="true">
                                <field name="name"/>
                            </tree> -->
                        </page>
                        <page string="Applicants">
                            <field name="applicant_ids">
                                <list default_order="ai_score desc" limit="10">
                                    <!-- <field name="name"/> -->
                                    <field name="partner_name"/>
                                    <field name="email_from"/>
                                    <field name="resume" widget="binary" filename="name"/>
                                    <field name="ai_score" widget="float" decoration-success="ai_score &gt;= 70" decoration-warning="ai_score &gt;= 50 and ai_score &lt; 70" decoration-danger="ai_score &lt; 50"/>
                                    <field name="auto_screened" widget="boolean"/>
                                    <field name="screening_date" readonly="1"/>
                                </list>
                            </field>
                        </page>
                        <page string="Resume Details" groups="base.group_system">
                            <field name="applicant_ids">
                                <list>
                                    <!-- <field name="name"/> -->
                                    <field name="ai_score"/>
                                    <field name="resume_text" readonly="1"/>
                                </list>
                            </field>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <!-- Kanban View for AI Resume Screening -->
    <record id="view_ai_resume_screening_kanban" model="ir.ui.view">
        <field name="name">ai.resume.screening.kanban</field>
        <field name="model">ai.resume.screening</field>
        <field name="arch" type="xml">
            <kanban default_group_by="job_position_id" class="o_kanban_dashboard" create="1" js_class="ai_screening_kanban">
                <field name="name"/>
                <field name="job_position_id"/>
                <field name="model_trained"/>
                <field name="min_years_experience"/>
                <field name="auto_screen_enabled"/>
                <field name="auto_train_enabled"/>
                <field name="email_notification_enabled"/>
                <field name="summary_notification_frequency"/>
                <field name="applicant_count"/>
                <field name="high_score_count"/>
                <field name="avg_score"/>
                <field name="id"/>
                <templates>
                    <t t-name="card">
                        <div class="oe_kanban_card oe_kanban_global_click" style="margin-bottom: 10px;">
                            <!-- Header with Title and Status Badge -->
                            <div class="o_kanban_card_header">
                                <div class="o_kanban_card_header_title">
                                    <div class="o_primary">
                                        <strong style="font-size: 16px; color: #2c3e50;"><field name="name"/></strong>
                                    </div>
                                </div>
                                <div class="o_kanban_card_header_top_right" style="display: flex; align-items: center; gap: 8px;">
                                    <!-- Ready Badge - Modern Design -->
                                    <span t-if="record.model_trained.raw_value" style="display: inline-flex; align-items: center; padding: 6px 14px; background: linear-gradient(135deg, #28a745 0%, #20c997 100%); color: white; border-radius: 20px; font-size: 11px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; box-shadow: 0 2px 8px rgba(40, 167, 69, 0.3); transition: all 0.3s ease; border: 1px solid rgba(255, 255, 255, 0.2);">
                                        <i class="fa fa-magic" style="margin-right: 6px; font-size: 12px; animation: pulse 2s infinite;" title="Ready"/>
                                        <span>Ready</span>
                                    </span>
                                    <!-- Not Ready Badge - Modern Design -->
                                    <span t-if="!record.model_trained.raw_value" style="display: inline-flex; align-items: center; padding: 6px 14px; background: linear-gradient(135deg, #ffc107 0%, #ff9800 100%); color: white; border-radius: 20px; font-size: 11px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; box-shadow: 0 2px 8px rgba(255, 193, 7, 0.3); transition: all 0.3s ease; border: 1px solid rgba(255, 255, 255, 0.2);">
                                        <i class="fa fa-clock-o" style="margin-right: 6px; font-size: 12px;" title="Not Ready"/>
                                        <span>Not Ready</span>
                                    </span>
                                </div>
                                <style>
                                    @keyframes pulse {
                                        0%, 100% { opacity: 1; transform: scale(1); }
                                        50% { opacity: 0.7; transform: scale(1.1); }
                                    }
                                </style>
                            </div>
                            
                            <!-- Card Content -->
                            <div class="o_kanban_card_content" style="padding: 12px 0;">
                                <!-- Job Position -->
                                <div style="margin-bottom: 15px; padding-bottom: 12px; border-bottom: 1px solid #e8e8e8;">
                                    <div style="display: flex; align-items: center; color: #5a6c7d;">
                                        <i class="fa fa-briefcase" style="margin-right: 8px; font-size: 14px; color: #5CA280;" title="Job Position"/>
                                        <span style="font-weight: 500;"><field name="job_position_id"/></span>
                                    </div>
                                </div>
                                
                                <!-- Statistics Grid -->
                                <div style="display: flex; justify-content: space-around; margin-bottom: 15px; padding: 12px; background-color: #f8f9fa; border-radius: 6px;">
                                    <div style="text-align: center; flex: 1;">
                                        <div style="font-size: 24px; font-weight: 700; color: #0066cc; line-height: 1.2; margin-bottom: 4px;">
                                            <field name="applicant_count"/>
                                        </div>
                                        <div style="font-size: 11px; color: #6c757d; text-transform: uppercase; letter-spacing: 0.5px;">
                                            <i class="fa fa-users" style="margin-right: 3px;" title="Applicants"/>Apps
                                        </div>
                                    </div>
                                    <div style="text-align: center; flex: 1; border-left: 1px solid #dee2e6; border-right: 1px solid #dee2e6;" t-if="record.high_score_count.raw_value">
                                        <div style="font-size: 24px; font-weight: 700; color: #28a745; line-height: 1.2; margin-bottom: 4px;">
                                            <field name="high_score_count"/>
                                        </div>
                                        <div style="font-size: 11px; color: #6c757d; text-transform: uppercase; letter-spacing: 0.5px;">
                                            <i class="fa fa-star" style="margin-right: 3px;" title="High Scores"/>High
                                        </div>
                                    </div>
                                    <div style="text-align: center; flex: 1;" t-if="record.avg_score.raw_value">
                                        <div style="font-size: 24px; font-weight: 700; line-height: 1.2; margin-bottom: 4px; color: #28a745;" t-if="record.avg_score.raw_value >= 70">
                                            <field name="avg_score"/>
                                        </div>
                                        <div style="font-size: 24px; font-weight: 700; line-height: 1.2; margin-bottom: 4px; color: #ffc107;" t-if="record.avg_score.raw_value >= 50 and record.avg_score.raw_value &lt; 70">
                                            <field name="avg_score"/>
                                        </div>
                                        <div style="font-size: 24px; font-weight: 700; line-height: 1.2; margin-bottom: 4px; color: #dc3545;" t-if="record.avg_score.raw_value and record.avg_score.raw_value &lt; 50">
                                            <field name="avg_score"/>
                                        </div>
                                        <div style="font-size: 11px; color: #6c757d; text-transform: uppercase; letter-spacing: 0.5px;">
                                            <i class="fa fa-chart-line" style="margin-right: 3px;" title="Average Score"/>Avg
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Progress Bar for Average Score -->
                                <div style="margin-bottom: 15px;" t-if="record.avg_score.raw_value">
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                                        <span style="font-size: 11px; color: #6c757d; font-weight: 500;">Progress</span>
                                        <span style="font-size: 11px; color: #28a745; font-weight: 600;" t-if="record.avg_score.raw_value >= 70">
                                            <field name="avg_score"/>%
                                        </span>
                                        <span style="font-size: 11px; color: #ffc107; font-weight: 600;" t-if="record.avg_score.raw_value >= 50 and record.avg_score.raw_value &lt; 70">
                                            <field name="avg_score"/>%
                                        </span>
                                        <span style="font-size: 11px; color: #dc3545; font-weight: 600;" t-if="record.avg_score.raw_value and record.avg_score.raw_value &lt; 50">
                                            <field name="avg_score"/>%
                                        </span>
                                    </div>
                                    <div style="height: 8px; background-color: #e9ecef; border-radius: 4px; overflow: hidden; position: relative; width: 100%;">
                                        <!-- Green progress bar for score >= 70 -->
                                        <div t-if="record.avg_score.raw_value >= 70" t-attf-style="width: #{record.avg_score.raw_value}%; height: 100%; background: linear-gradient(90deg, #28a745 0%, #20c997 100%); border-radius: 4px; transition: width 0.3s ease;">
                                        </div>
                                        <!-- Yellow progress bar for score 50-69 -->
                                        <div t-if="record.avg_score.raw_value >= 50 and record.avg_score.raw_value &lt; 70" t-attf-style="width: #{record.avg_score.raw_value}%; height: 100%; background: linear-gradient(90deg, #ffc107 0%, #ffca2c 100%); border-radius: 4px; transition: width 0.3s ease;">
                                        </div>
                                        <!-- Red progress bar for score < 50 -->
                                        <div t-if="record.avg_score.raw_value and record.avg_score.raw_value &lt; 50" t-attf-style="width: #{record.avg_score.raw_value}%; height: 100%; background: linear-gradient(90deg, #dc3545 0%, #e4606d 100%); border-radius: 4px; transition: width 0.3s ease;">
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Requirements -->
                                <div style="margin-bottom: 12px; padding: 10px; background-color: #fff3cd; border-left: 3px solid #ffc107; border-radius: 4px;">
                                    <div style="font-size: 12px; color: #856404;">
                                        <i class="fa fa-calendar-check-o" style="margin-right: 6px; color: #ffc107;" title="Minimum Experience"/>
                                        <strong>Minimum Experience:</strong> <field name="min_years_experience"/> years
                                    </div>
                                </div>
                                
                                <!-- Automation Badges -->
                                <div style="margin-bottom: 10px; display: flex; flex-wrap: wrap; gap: 8px;">
                                    <span t-if="record.auto_screen_enabled.raw_value" style="display: inline-flex; align-items: center; padding: 5px 12px; background: linear-gradient(135deg, #17a2b8 0%, #138496 100%); color: white; font-size: 10px; font-weight: 600; border-radius: 15px; box-shadow: 0 2px 4px rgba(23, 162, 184, 0.25); border: 1px solid rgba(255, 255, 255, 0.2);">
                                        <i class="fa fa-cog" style="margin-right: 5px; font-size: 10px;" title="Auto-Screen Enabled"/>Auto-Screen
                                    </span>
                                    <span t-if="record.auto_train_enabled.raw_value" style="display: inline-flex; align-items: center; padding: 5px 12px; background: linear-gradient(135deg, #007bff 0%, #0056b3 100%); color: white; font-size: 10px; font-weight: 600; border-radius: 15px; box-shadow: 0 2px 4px rgba(0, 123, 255, 0.25); border: 1px solid rgba(255, 255, 255, 0.2);">
                                        <i class="fa fa-refresh" style="margin-right: 5px; font-size: 10px;" title="Auto-Train Enabled"/>Auto-Train
                                    </span>
                                    <span t-if="record.email_notification_enabled.raw_value" style="display: inline-flex; align-items: center; padding: 5px 12px; background: linear-gradient(135deg, #28a745 0%, #1e7e34 100%); color: white; font-size: 10px; font-weight: 600; border-radius: 15px; box-shadow: 0 2px 4px rgba(40, 167, 69, 0.25); border: 1px solid rgba(255, 255, 255, 0.2);">
                                        <i class="fa fa-envelope" style="margin-right: 5px; font-size: 10px;" title="Instant Notifications"/>Instant
                                    </span>
                                    <span t-if="record.summary_notification_frequency.raw_value == 'daily'" style="display: inline-flex; align-items: center; padding: 5px 12px; background: linear-gradient(135deg, #6f42c1 0%, #5a32a3 100%); color: white; font-size: 10px; font-weight: 600; border-radius: 15px; box-shadow: 0 2px 4px rgba(111, 66, 193, 0.25); border: 1px solid rgba(255, 255, 255, 0.2);">
                                        <i class="fa fa-calendar" style="margin-right: 5px; font-size: 10px;" title="Daily Notifications"/>Daily
                                    </span>
                                    <span t-if="record.summary_notification_frequency.raw_value == 'weekly'" style="display: inline-flex; align-items: center; padding: 5px 12px; background: linear-gradient(135deg, #17a2b8 0%, #138496 100%); color: white; font-size: 10px; font-weight: 600; border-radius: 15px; box-shadow: 0 2px 4px rgba(23, 162, 184, 0.25); border: 1px solid rgba(255, 255, 255, 0.2);">
                                        <i class="fa fa-calendar-check-o" style="margin-right: 5px; font-size: 10px;" title="Weekly Notifications"/>Weekly
                                    </span>
                                    <span t-if="record.summary_notification_frequency.raw_value == 'monthly'" style="display: inline-flex; align-items: center; padding: 5px 12px; background: linear-gradient(135deg, #ff9800 0%, #e68900 100%); color: white; font-size: 10px; font-weight: 600; border-radius: 15px; box-shadow: 0 2px 4px rgba(255, 152, 0, 0.25); border: 1px solid rgba(255, 255, 255, 0.2);">
                                        <i class="fa fa-calendar-o" style="margin-right: 5px; font-size: 10px;" title="Monthly Notifications"/>Monthly
                                    </span>
                                </div>
                                
                                <!-- Empty State -->
                                <div style="padding: 15px; text-align: center; background-color: #e7f3ff; border-radius: 6px; border: 1px dashed #b3d9ff;" t-if="!record.applicant_count.raw_value">
                                    <i class="fa fa-info-circle" style="color: #0066cc; font-size: 18px; margin-bottom: 6px; display: block;" title="No Applicants"/>
                                    <span style="font-size: 12px; color: #0066cc; font-weight: 500;">No applicants yet</span>
                                </div>
                            </div>
                            
                            <!-- Footer Actions -->
                            <div class="o_kanban_card_manage_pane" style="border-top: 1px solid #e8e8e8; padding-top: 12px; margin-top: 12px; display: flex; justify-content: center; gap: 8px;">
                                <a role="button" class="o_kanban_card_manage_section_edit oe_kanban_action oe_kanban_action_a" data-type="edit" title="Edit" href="#" style="display: inline-flex; align-items: center; justify-content: center; padding: 10px 20px; background: linear-gradient(135deg, #5CA280 0%, #4a8a6a 100%); color: white; border-radius: 8px; text-decoration: none; font-size: 13px; font-weight: 600; transition: all 0.3s ease; border: none; box-shadow: 0 2px 4px rgba(92, 162, 128, 0.3); min-width: 100px;">
                                    <i class="fa fa-pencil" style="margin-right: 6px; font-size: 13px;" title="Edit"/>
                                    Edit
                                </a>
                                <a role="button" class="o_kanban_card_manage_section_settings" data-type="settings" title="Settings" href="#" style="display: inline-flex; align-items: center; justify-content: center; padding: 10px 20px; background: linear-gradient(135deg, #6c757d 0%, #5a6268 100%); color: white; border-radius: 8px; text-decoration: none; font-size: 13px; font-weight: 600; transition: all 0.3s ease; border: none; box-shadow: 0 2px 4px rgba(108, 117, 125, 0.3); min-width: 100px;">
                                    <i class="fa fa-cog" style="margin-right: 6px; font-size: 13px;" title="Settings"/>
                                    Settings
                                </a>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>

    <!-- Tree View for AI Resume Screening -->
    <record id="view_ai_resume_screening_tree" model="ir.ui.view">
        <field name="name">ai.resume.screening.tree</field>
        <field name="model">ai.resume.screening</field>
        <field name="arch" type="xml">
            <list>
                <field name="name"/>
                <field name="job_position_id"/>
                <field name="min_years_experience"/>
                <field name="model_trained"/>
            </list>
        </field>
    </record>

    <!-- Search View for AI Resume Screening -->
    <record id="view_ai_resume_screening_search" model="ir.ui.view">
        <field name="name">ai.resume.screening.search</field>
        <field name="model">ai.resume.screening</field>
        <field name="arch" type="xml">
            <search>
                <!-- Search Fields -->
                <field name="name"/>
                <field name="job_position_id"/>
                <field name="model_trained"/>
                
                <!-- Status Filters -->
                <filter string="Trained" name="model_trained" domain="[('model_trained', '=', True)]"/>
                <filter string="Not Trained" name="model_not_trained" domain="[('model_trained', '=', False)]"/>
                <filter string="Auto-Screen Enabled" name="auto_screen_enabled" domain="[('auto_screen_enabled', '=', True)]"/>
                <filter string="Auto-Train Enabled" name="auto_train_enabled" domain="[('auto_train_enabled', '=', True)]"/>
                <filter string="Email Notifications" name="email_notification_enabled" domain="[('email_notification_enabled', '=', True)]"/>
                
                <!-- Advanced Filters -->
                <separator/>
                <filter string="Has Applicants" name="has_applicants" domain="[('applicant_ids', '!=', False)]"/>
                <filter string="Has High Scoring Applicants" name="has_high_scores" domain="[('applicant_ids.ai_score', '>=', 70)]"/>
                <filter string="Daily Notifications" name="daily_notifications" domain="[('summary_notification_frequency', '=', 'daily')]"/>
                <filter string="Weekly Notifications" name="weekly_notifications" domain="[('summary_notification_frequency', '=', 'weekly')]"/>
                <filter string="Monthly Notifications" name="monthly_notifications" domain="[('summary_notification_frequency', '=', 'monthly')]"/>
                <filter string="No Notifications" name="no_notifications" domain="[('summary_notification_frequency', '=', 'none')]"/>
                
                <!-- Group By -->
                <group>
                    <filter name="group_job_position" string="Job Position" context="{'group_by': 'job_position_id'}"/>
                    <filter name="group_model_trained" string="Model Trained" context="{'group_by': 'model_trained'}"/>
                    <filter name="group_auto_screen" string="Auto-Screen" context="{'group_by': 'auto_screen_enabled'}"/>
                    <filter name="group_auto_train" string="Auto-Train" context="{'group_by': 'auto_train_enabled'}"/>
                    <filter name="group_email_notifications" string="Email Notifications" context="{'group_by': 'email_notification_enabled'}"/>
                    <filter name="group_notification_frequency" string="Notification Frequency" context="{'group_by': 'summary_notification_frequency'}"/>
                </group>
            </search>
        </field>
    </record>

    <!-- Server Action for Loading Sample Data (must be defined before action window that references it) -->
    <record id="action_load_ai_screening_sample_data" model="ir.actions.server">
        <field name="name">Load sample data</field>
        <field name="model_id" ref="hr.model_hr_job"/>
        <field name="state">code</field>
        <field name="code">action = model._action_load_ai_screening_scenario()</field>
    </record>

    <!-- Action for AI Resume Screening -->
    <record id="action_ai_resume_screening" model="ir.actions.act_window">
        <field name="name">AI Resume Screening</field>
        <field name="res_model">ai.resume.screening</field>
        <field name="view_mode">kanban,list,form</field>
        <field name="search_view_id" ref="view_ai_resume_screening_search"/>
    </record>

    <!-- Inherited HR Job Form View -->
    <record id="view_hr_job_form_inherit_ai_screening" model="ir.ui.view">
        <field name="name">hr.job.form.inherit.ai.screening</field>
        <field name="model">hr.job</field>
        <field name="inherit_id" ref="hr.view_hr_job_form"/>
        <field name="arch" type="xml">
            <xpath expr="//div[@name='button_box']" position="inside">
                <button name="action_open_ai_screening" type="object" class="oe_stat_button" icon="fa-magic">
                    <div class="o_stat_info">
                        <span class="o_stat_text">AI Screening</span>
                    </div>
                </button>
            </xpath>
        </field>
    </record>

    <!-- Note: Tree and Search view inheritance handled via Python post_init_hook -->
    <!-- The AI Score field will be added programmatically to existing tree views -->
    <!-- Users can also manually add the column via the column selector in the UI -->

    <!-- Note: Tree view inheritance handled via Python post_init_hook -->
    <!-- The AI Score, Auto-Screened, and Screening Date fields will be added programmatically to existing tree views -->
    <!-- Users can also manually add the columns via the column selector in the UI -->

    <!-- Inherited HR Applicant Form View -->
    <record id="hr_applicant_view_form_inherit_resume" model="ir.ui.view">
        <field name="name">hr.applicant.view.form.inherit.resume</field>
        <field name="model">hr.applicant</field>
        <field name="inherit_id" ref="hr_recruitment.hr_applicant_view_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='job_id']" position="after">
                <field name="resume" placeholder="Upload Resume" widget="binary"/>
                <field name="ai_score" readonly="1" widget="float"/>
                <field name="auto_screened" readonly="1" widget="boolean"/>
                <field name="screening_date" readonly="1"/>
            </xpath>
        </field>
    </record>

    <!-- Inherited HR Applicant Search View - Add AI Score Filters and Groups -->
    <record id="hr_applicant_view_search_inherit_ai_score" model="ir.ui.view">
        <field name="name">hr.applicant.view.search.inherit.ai.score</field>
        <field name="model">hr.applicant</field>
        <field name="inherit_id" ref="hr_recruitment.hr_applicant_view_search"/>
        <field name="arch" type="xml">
            <!-- Add AI Score Filters -->
            <xpath expr="//search" position="inside">
                <separator/>
                <filter string="Excellent (≥90)" name="ai_score_excellent" domain="[('ai_score', '>=', 90)]" help="AI Score: 90-100"/>
                <filter string="Great (≥80)" name="ai_score_great" domain="[('ai_score', '>=', 80)]" help="AI Score: 80-89"/>
                <filter string="Good (≥70)" name="ai_score_good" domain="[('ai_score', '>=', 70)]" help="AI Score: 70-79"/>
                <filter string="Fair (≥50)" name="ai_score_fair" domain="[('ai_score', '>=', 50)]" help="AI Score: 50-69"/>
                <filter string="Poor (&lt;50)" name="ai_score_poor" domain="[('ai_score', '&lt;', 50), ('ai_score', '>', 0)]" help="AI Score: 0-49"/>
                <filter string="Not Scored" name="ai_score_not_scored" domain="[('ai_score', '=', 0)]" help="No AI Score assigned"/>
            </xpath>
            
            <!-- Add AI Score Group Filters -->
            <xpath expr="//group" position="inside">
                <filter name="group_ai_score_range" string="AI Score Range" context="{'group_by': 'ai_score_range'}"/>
                <filter name="group_ai_score" string="AI Score" context="{'group_by': 'ai_score'}"/>
                <filter name="group_ai_screening" string="AI Screening" context="{'group_by': 'ai_screening_id'}"/>
                <filter name="group_auto_screened" string="Auto-Screened" context="{'group_by': 'auto_screened'}"/>
            </xpath>
        </field>
    </record>

    <!-- New Tree View for Top Matches -->
    <record id="view_ai_resume_top_matches_tree" model="ir.ui.view">
        <field name="name">ai.resume.top.matches.tree</field>
        <field name="model">hr.applicant</field>
        <field name="arch" type="xml">
            <list default_order="ai_score desc" limit="80">
                <!-- <field name="name"/> -->
                <field name="partner_name"/>
                <field name="email_from"/>
                <field name="job_id"/>
                <field name="ai_score" widget="float" decoration-success="ai_score &gt;= 70" decoration-warning="ai_score &gt;= 50 and ai_score &lt; 70" decoration-danger="ai_score &lt; 50"/>
                <field name="auto_screened" widget="boolean"/>
                <field name="screening_date"/>
            </list>
        </field>
    </record>

    <!-- Add Top Matches Button to Form -->
    <record id="view_ai_resume_screening_form_with_top_matches" model="ir.ui.view">
        <field name="name">ai.resume.screening.form.with.top.matches</field>
        <field name="model">ai.resume.screening</field>
        <field name="inherit_id" ref="view_ai_resume_screening_form"/>
        <field name="arch" type="xml">
            <xpath expr="//header" position="inside">
                <button name="action_view_top_matches" string="View Top Matches" type="object" class="btn-info" invisible="model_trained == False"/>
            </xpath>
        </field>
    </record>

    <!-- Inherited HR Job Kanban View - Add AI Screening Information -->
    <record id="view_hr_job_kanban_inherit_ai_screening" model="ir.ui.view">
        <field name="name">hr.job.kanban.inherit.ai.screening</field>
        <field name="model">hr.job</field>
        <field name="inherit_id" ref="hr_recruitment.view_hr_job_kanban"/>
        <field name="arch" type="xml">
            <!-- 1) Make AI fields available on the kanban view -->
            <xpath expr="//kanban" position="inside">
                <field name="ai_screening_count"/>
                <field name="ai_screening_trained"/>
                <field name="ai_screening_applicant_count"/>
                <field name="ai_screening_avg_score"/>
            </xpath>

                        <!-- Add AI Screening Badges in card header -->
            <xpath expr="//div[hasclass('o_kanban_card_header')]" position="after">
                <div class="col align-content-center" >
                    <div class="d-flex justify-content-center">
                        <field name="ai_screening_count" class="number"/>
                        <div class="number_description fs-4 lh-1">
                            Screenings
                        </div>
                    </div>
                </div>
                <div class="col align-content-center" >
                    <div class="d-flex justify-content-center" t-if="record.ai_screening_trained.raw_value" style="color: #28a745;">
                        <i class="fa fa-check-circle" style="margin-right: 4px;" title="AI Model Trained"></i>
                        <div class="number_description fs-4 lh-1">
                            Trained
                        </div>
                    </div>
                    <div class="d-flex justify-content-center" t-if="!record.ai_screening_trained.raw_value" style="color: #dc3545;">
                        <i class="fa fa-times-circle" style="margin-right: 4px;" title="AI Model Not Trained"></i>
                        <div class="number_description fs-4 lh-1">
                            Not Trained
                        </div>
                    </div>
                </div>
            </xpath>
            
            <!-- Add AI Screening Statistics in card body -->
            <xpath expr="//div[hasclass('o_kanban_card_header')]" position="after">
                <div class="col align-content-center">
                    <div class="d-flex justify-content-center">
                        <field name="ai_screening_applicant_count" class="number"/>
                        <div class="number_description fs-4 lh-1">
                            screened<br/>applicants
                        </div>
                    </div>
                </div>
                <div class="col align-content-center" >
                    <div class="d-flex justify-content-center">
                        <span class="number" t-if="record.ai_screening_avg_score.raw_value >= 70" style="font-size: 36px; color: #28a745;">
                            <t t-esc="record.ai_screening_avg_score.value"/>%
                        </span>
                        <span class="number" t-if="record.ai_screening_avg_score.raw_value >= 50 and record.ai_screening_avg_score.raw_value &lt; 70" style="font-size: 36px; color: #ffc107;">
                            <t t-esc="record.ai_screening_avg_score.value"/>%
                        </span>
                        <span class="number" t-if="record.ai_screening_avg_score.raw_value &lt; 50" style="font-size: 36px; color: #dc3545;">
                            <t t-esc="record.ai_screening_avg_score.value"/>%
                        </span>
                        <div class="number_description fs-4 lh-1">
                            Avg Score
                        </div>
                    </div>
                </div>
            </xpath>
        </field>
    </record>


    <!-- Inherited HR Job Tree/List View - Add Screenings and Trained columns -->
    <record id="view_hr_job_tree_inherit_ai_screening" model="ir.ui.view">
        <field name="name">hr.job.tree.inherit.ai.screening</field>
        <field name="model">hr.job</field>
        <field name="inherit_id" ref="hr_recruitment.hr_job_view_tree_inherit"/>
        <field name="arch" type="xml">
            <!-- Add Screenings, Screened, Trained, and Avg Score columns -->
            <xpath expr="//list" position="inside">
                <field name="ai_screening_count" string="Screenings" widget="integer" optional="show"/>
                <field name="ai_screening_applicant_count" string="Screened" widget="integer" optional="show"/>
                <field name="ai_screening_trained" string="Trained" widget="boolean_toggle" optional="show"/>
                <field name="ai_screening_avg_score" string="Avg Score" widget="float" optional="show" 
                       decoration-success="ai_screening_avg_score >= 70" 
                       decoration-warning="ai_screening_avg_score >= 50 and ai_screening_avg_score &lt; 70" 
                       decoration-danger="ai_screening_avg_score &lt; 50"/>
            </xpath>
        </field>
    </record>

    <!-- Menu -->
<!--    <menuitem id="menu_ai_resume_screening" name="AI Resume Screening" parent="hr_recruitment.menu_hr_recruitment_root" action="action_ai_resume_screening" sequence="20"/>-->
</odoo>